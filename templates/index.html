<!-- @format -->
{% extends 'head.html' %} {% block content %}

<p>
  이 사이트는 사용자가 <b>실외에 있는 시간</b>을 기준으로 최고 기온, 최저 기온,
  우산 여부 안내 및 적절한 옷차림을 추천해주는 서비스입니다.
</p>
<button onclick="logout()">로그아웃</button><a href="/update"><button>정보수정</button></a><br />
<button onclick="tomorrow('{{ max_TMP_t }}', '{{ min_TMP_t }}', '{{ umbrella_t }}', '{{ msg_t }}', '{{ clothes_txt_t }}', '{{ img_t }}')">내일 날씨</button>
<p id='max_TMP'>최고 기온: {{ max_TMP }}°C</p>
<p id='min_TMP'>최저 기온: {{ min_TMP }}°C</p>
<p id='umbrella'>우산 챙길까? {{ umbrella }}</p>
<p id='msg'>옷 추천: {{ msg }} ex) {{ clothes_txt }}</p>
<img id='img' src = "/static/{{ img }}.jpg">
<script
  type="text/javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"
></script>
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
  integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
  crossorigin="anonymous"
></script>
<script type="text/javascript">
  function logout() {
    $.ajax({
      method: "GET",
      url: "logout",
      data: {},
      success: function (response) {
        if (response["result"] === "success") {
          alert("로그아웃 되셨습니다!");
        }
        window.location.reload();
      },
    });
  }

  function tomorrow(max_TMP, min_TMP, umbrella, msg, clothes_txt, img) {
      console.log('1111111111')
    var max_TMP_tag = '<p>최고 기온: ' + max_TMP + '°C</p>'
    var min_TMP_tag = '<p>최저 기온: ' + min_TMP + '°C</p>'
    var umbrella_tag = '<p>우산 챙길까? ' + umbrella + '</p>'
    var msg_tag = '<p>옷 추천: ' + msg + ' ex) ' + clothes_txt + '</p>'
    var img_tag = "<img id='img' src = '/static/" + img + '.jpg">'

    document.getElementById('max_TMP').innerHTML = max_TMP_tag;
    document.getElementById('min_TMP').innerHTML = min_TMP_tag;
    document.getElementById('umbrella').innerHTML = umbrella_tag;
    document.getElementById('msg').innerHTML = msg_tag;
    document.getElementById('img').innerHTML = img_tag;
  }
</script>

{% endblock %}